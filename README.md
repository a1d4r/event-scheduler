# Event Scheduler

### Предисловие
Как много раз вы договаривались о встрече с человеком? 
Как часто при этом вам приходилось по несколько раз предлагать разные даты и время? 
Бывает, нужно отправить много сообщений, чтобы выбрать время, 
которое будет удобно как для вас, так и для вашего собеседника.
А что если нужно собраться группой из 10 человек? В таком случае, эта задача
становится сложно разрешимой. 

На помощь приходят сервисы-планировщики.
Большинство из них предлагают заранее задать определенные промежутки времени,
чтобы потом участники выбрали из них наиболее подходящие. Однако, не всегда
такой подход является удобным. Представим, что команде из 3 человек нужно
собраться на неделе, чтобы обсудить решение проекта.
Для одному из участников придется создать опрос с большим количеством вариантов
для времени встречи. Если предположить, что встреча будет длиться как минимум 1 час,
то придется создать более, чем 50 таких вариантов.

Заданием является разработать бэкенд для сервиса-планировщика с удобным API.
Идею для проекта предложил [@Winner_OK](https://t.me/Winner_OK)

### Описание
Данное приложение позволяет создать опрос для проведения мероприятия, указав при
этом только временные рамки и длительность самого мероприятия. Затем, каждый 
участник может оставить свое расписание для опроса.
В любой момент времени можно получить набор рекомендуемых временных промежутков
для проведения мероприятия. Сначала будут предложены наиболее подходящие - с
наибольшим количеством участников.

### Документация
Документация к API можно посмотреть по [данному адресу](https://documenter.getpostman.com/view/11613270/TzRLnWjd).
Для каждого запроса приведены примеры (Example 1, Example 2, и т.д.).

### Особенности и стек технологий
- FastAPI (включая Pydantic для валидации данных)
- Tortoise ORM с asyncpg в качестве драйвера для БД
- PostgreSQL в качестве БД
- Aerich для миграций БД
- Intervaltree в качестве структуры данных для пересечения расписаний
- Pytest + pytest-asyncio для тестирования
- FactoryBoy для создания моделей в тестах
- HTTPX в качестве асинхронного http клиента для тестирования API

### Идеи для улучшения/доработки
- Добавить аутентификацию для пользователей, чтобы создавать приватные опросы.
- Добавить приоритет для временных промежутков в расписании участника.
- Создать production-ready конфигурацию для докера
- Сохранять интервальное дерево в базе данных, чтобы не перестраивать 
  его после каждого запроса.
- Валидировать дату и время в расписании (чтобы она была в отрезке, 
  указанном для мероприятия)

### Команды

#### Запустить dev сервер
    make up

#### Отключить dev сервер
    make down

#### Запустить тесты
    make test

#### Создать виртуальное окружение
    make venv

#### Запустить линтеры
    make lint

#### Запустить форматеры
    make format
